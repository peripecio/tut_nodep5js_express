<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Control Arduino via Web -  express</title>
<!--    <script src="/libraries/socket.io/socket.io.js"></script> -->
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script src="/libraries/p5/p5.js" type="text/javascript"></script>

<!--    <script src="libraries/p5/p5.dom.js" type="text/javascript"></script> -->
<!--    <script src="libraries/p5/p5.sound.js" type="text/javascript"></script> -->

    <script src="sketch_p5_socket.js" type="text/javascript"></script> 

    <style> 
      body {padding: 10px; margin: 30px;} 
      canvas {vertical-align: top;}
      #slidecontainer {padding-top: 10px;
                       padding-bottom: 20px;
                       padding-right: 5px;
                       padding-left: 5px;
                     }

    </style>
  </head>
  <body>
    <div>
      <p>HOLO</p>
      <p>Controla la lud Led</p>
      <p>Sigo los tuts de D.Shifman: <a href="https://www.youtube.com/watch?v=2hhEOGXcCvg" target="new">Using Express with Node - WebSockets and p5.js Tutorial</a></p>
      <div id="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="mySlider"> 
        Valor: <span id="valSlider"></span>
      </div>
    </div>

    <script type="text/javascript">
    // crear objetos
      var slider = document.getElementById("mySlider");
      var output = document.getElementById("valSlider");

      var socket1;
      socket1 = io.connect('http://127.0.0.1:3000)', { 'forceNew': true });

      output.innerHTML = slider.value; // Display the default slider value

      // Update the current slider value (each time you drag the slider handle)
      slider.oninput = function() {
        output.innerHTML = this.value;

        // enviar via socket
        socket1.emit('luz', this.value);
        console.log("Se supone que he enviado socket luz");

      }
    </script>

  </body>
</html>
